<UserControl x:Class="NiesPro.AdminPanel.Views.LoginView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes">

    <Grid>
        <!-- Background avec gradient -->
        <Grid.Background>
            <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                <GradientStop Color="{DynamicResource Primary700}" Offset="0"/>
                <GradientStop Color="{DynamicResource Primary500}" Offset="1"/>
            </LinearGradientBrush>
        </Grid.Background>

        <!-- Contenu centré -->
        <Border MaxWidth="400" MaxHeight="500" 
                Background="{DynamicResource MaterialDesignPaper}"
                CornerRadius="8"
                Padding="48"
                HorizontalAlignment="Center"
                VerticalAlignment="Center">
            
            <StackPanel>
                <!-- Logo et titre -->
                <StackPanel HorizontalAlignment="Center" Margin="0,0,0,32">
                    <materialDesign:PackIcon Kind="Server" 
                                           Width="64" Height="64" 
                                           Foreground="{DynamicResource PrimaryHueMidBrush}"
                                           HorizontalAlignment="Center"/>
                    <TextBlock Text="NiesPro" 
                             Style="{StaticResource MaterialDesignHeadline4TextBlock}"
                             HorizontalAlignment="Center" 
                             Margin="0,12,0,4"/>
                    <TextBlock Text="Administration Panel" 
                             Style="{StaticResource MaterialDesignSubtitle1TextBlock}"
                             HorizontalAlignment="Center"
                             Opacity="0.7"/>
                </StackPanel>

                <!-- Formulaire de connexion -->
                <StackPanel>
                    <!-- Email -->
                    <TextBox materialDesign:HintAssist.Hint="Adresse email"
                             Text="{Binding Email, UpdateSourceTrigger=PropertyChanged}"
                             Style="{StaticResource MaterialDesignOutlinedTextBox}"
                             Margin="0,0,0,16">
                        <TextBox.InputBindings>
                            <KeyBinding Key="Enter" Command="{Binding LoginCommand}"/>
                        </TextBox.InputBindings>
                    </TextBox>

                    <!-- Mot de passe -->
                    <PasswordBox x:Name="PasswordBox"
                                materialDesign:HintAssist.Hint="Mot de passe"
                                Style="{StaticResource MaterialDesignOutlinedPasswordBox}"
                                Margin="0,0,0,16"
                                PasswordChanged="PasswordBox_PasswordChanged">
                        <PasswordBox.InputBindings>
                            <KeyBinding Key="Enter" Command="{Binding LoginCommand}"/>
                        </PasswordBox.InputBindings>
                    </PasswordBox>

                    <!-- Message d'erreur -->
                    <TextBlock Text="{Binding ErrorMessage}"
                             Foreground="{DynamicResource ValidationErrorBrush}"
                             Style="{StaticResource MaterialDesignCaptionTextBlock}"
                             Margin="0,0,0,16"
                             Visibility="{Binding HasError, Converter={StaticResource BoolToVisConverter}}"/>

                    <!-- Options -->
                    <CheckBox Content="Se souvenir de moi"
                             IsChecked="{Binding RememberMe}"
                             Margin="0,0,0,24"/>

                    <!-- Bouton de connexion -->
                    <Button Command="{Binding LoginCommand}"
                           Content="SE CONNECTER"
                           Style="{StaticResource MaterialDesignRaisedButton}"
                           materialDesign:ButtonAssist.CornerRadius="4"
                           Height="40"
                           IsDefault="True"
                           Margin="0,0,0,16">
                        <Button.IsEnabled>
                            <MultiBinding Converter="{StaticResource BooleanAndConverter}">
                                <Binding Path="IsLoading" Converter="{StaticResource InverseBooleanConverter}"/>
                                <Binding Path="Email" Converter="{StaticResource StringToBooleanConverter}"/>
                                <Binding Path="Password" Converter="{StaticResource StringToBooleanConverter}"/>
                            </MultiBinding>
                        </Button.IsEnabled>
                    </Button>

                    <!-- Indicateur de chargement -->
                    <ProgressBar IsIndeterminate="True" 
                               Height="4"
                               Visibility="{Binding IsLoading, Converter={StaticResource BoolToVisConverter}}"/>
                </StackPanel>

                <!-- Actions secondaires -->
                <StackPanel HorizontalAlignment="Center" Margin="0,24,0,0">
                    <Button Content="Mot de passe oublié ?" 
                           Style="{StaticResource MaterialDesignFlatButton}"
                           Foreground="{DynamicResource PrimaryHueMidBrush}"/>
                </StackPanel>

                <!-- Version et copyright -->
                <StackPanel HorizontalAlignment="Center" Margin="0,32,0,0">
                    <TextBlock Text="Version 1.0.0" 
                             Style="{StaticResource MaterialDesignCaptionTextBlock}"
                             HorizontalAlignment="Center"
                             Opacity="0.5"/>
                    <TextBlock Text="© 2025 NiesPro. Tous droits réservés." 
                             Style="{StaticResource MaterialDesignCaptionTextBlock}"
                             HorizontalAlignment="Center"
                             Opacity="0.5"
                             Margin="0,4,0,0"/>
                </StackPanel>
            </StackPanel>
        </Border>
    </Grid>
</UserControl>